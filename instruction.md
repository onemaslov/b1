# Project Overview
    при входе на сайт должна открываться карта местности с возможностью выбора места на карте
    должна быть возможность добавления меток на карту
    должна быть возможность редактирования меток
    должна быть возможность удаления меток
    должна быть возможность просмотра меток
    должна быть возможность просмотра списка меток. 
    Список меток будет открываться в сайдбаре справа экрана. 
    Метку можно смотреть подробнее, или нажав на значок (сам придумаешь какой нибудь подходящий), карта центрируется по этой метке.
    проект будет залит на github 
    будет использован CI/CD для автоматической загрузки на хостинг

# Core functionalities

## Реализованный стек технологий:
    ✅ Frontend: Next.js 14 + React 18 + TypeScript
    ✅ Стилизация: Tailwind CSS
    ✅ Карты: Leaflet + OpenStreetMap (бесплатно)
    ✅ Backend: Next.js API Routes (serverless)
    ✅ База данных: SQLite (локально) / PostgreSQL (production) + Prisma ORM
    ✅ Хостинг: Vercel (бесплатный план)
    ✅ CI/CD: GitHub Actions + Vercel автоматический деплой

## Основная функциональность:
    ✅ Интерактивная карта с метками
    ✅ CRUD операции для меток (создание, чтение, обновление, удаление)
    ✅ Сайдбар со списком всех меток
    ✅ Модальные окна для добавления/редактирования
    ✅ Центрирование карты на выбранной метке
    ✅ Адаптивный дизайн для мобильных устройств
    ✅ Полностью русскоязычный интерфейс

# Project file structure

```
b1/
├── prisma/
│   └── schema.prisma          # Схема базы данных Prisma
│                              # Определяет модель Marker с полями:
│                              # - id, title, description, latitude, longitude
│                              # - createdAt, updatedAt
│
├── src/
│   ├── app/                   # Next.js App Router
│   │   ├── api/               # API Routes (серверные endpoints)
│   │   │   └── markers/
│   │   │       ├── route.ts   # GET (все метки), POST (создать метку)
│   │   │       └── [id]/
│   │   │           └── route.ts # GET, PATCH, DELETE для одной метки
│   │   │
│   │   ├── globals.css        # Глобальные стили (Tailwind + Leaflet)
│   │   ├── layout.tsx         # Корневой layout с метаданными
│   │   └── page.tsx           # Главная страница приложения
│   │                          # Содержит логику управления состоянием,
│   │                          # загрузку меток, обработчики событий
│   │
│   ├── components/            # React компоненты
│   │   ├── Map.tsx            # Компонент интерактивной карты (Leaflet)
│   │   │                      # - Отображение меток на карте
│   │   │                      # - Обработка кликов по карте и маркерам
│   │   │                      # - Центрирование на выбранной метке
│   │   │
│   │   ├── Sidebar.tsx        # Сайдбар со списком меток
│   │   │                      # - Список всех меток
│   │   │                      # - Кнопки редактирования и удаления
│   │   │                      # - Кнопка центрирования на метке
│   │   │
│   │   ├── MarkerModal.tsx    # Модальное окно для добавления/редактирования
│   │   │                      # - Форма с полями: название, описание, координаты
│   │   │                      # - Валидация данных
│   │   │
│   │   └── DeleteConfirmModal.tsx # Модальное окно подтверждения удаления
│   │                              # - Предупреждение о необратимости действия
│   │
│   ├── lib/
│   │   └── prisma.ts          # Настройка Prisma клиента
│   │                          # Singleton паттерн для переиспользования
│   │
│   └── types/
│       └── marker.ts          # TypeScript типы и интерфейсы
│                              # - Marker, CreateMarkerInput, UpdateMarkerInput
│
├── .eslintrc.json             # Конфигурация ESLint
├── .gitignore                 # Игнорируемые файлы для Git
├── env.example                # Пример файла с переменными окружения
├── next.config.js             # Конфигурация Next.js
├── package.json               # Зависимости проекта и скрипты
├── postcss.config.js          # Конфигурация PostCSS для Tailwind
├── tailwind.config.ts         # Конфигурация Tailwind CSS (цвета, темы)
├── tsconfig.json              # Конфигурация TypeScript
├── vercel.json                # Конфигурация для деплоя на Vercel
├── instruction.md             # Этот файл - описание проекта
└── README.md                  # Документация проекта
```

## Описание ключевых компонентов

### Backend (API Routes)

**`/api/markers/route.ts`**
- `GET` - возвращает все метки из БД с сортировкой по дате создания
- `POST` - создаёт новую метку, валидирует обязательные поля

**`/api/markers/[id]/route.ts`**
- `GET` - возвращает одну метку по ID
- `PATCH` - обновляет метку (частичное обновление)
- `DELETE` - удаляет метку из БД

### Frontend (Components)

**`Map.tsx`**
- Использует библиотеку Leaflet для отображения карты
- Динамически загружается только на клиенте (`ssr: false`)
- Управляет слоем маркеров на карте
- Поддерживает клики по карте для добавления меток
- Центрирует карту на выбранной метке

**`Sidebar.tsx`**
- Отображается справа с анимацией появления
- Показывает список всех меток с их данными
- Кнопки действий: просмотр, редактирование, удаление
- Адаптивный дизайн с overlay для мобильных устройств

**`MarkerModal.tsx`**
- Универсальная форма для создания и редактирования
- Автоматически заполняется координатами при клике на карту
- Валидация обязательных полей (название, координаты)

**`DeleteConfirmModal.tsx`**
- Модальное окно для подтверждения удаления
- Показывает название удаляемой метки
- Предупреждает о необратимости действия

### Стилизация

- **Tailwind CSS** для быстрой стилизации компонентов
- Кастомная цветовая палитра `primary` (оттенки синего)
- Адаптивный дизайн (mobile-first подход)
- Плавные анимации и переходы

### База данных

**Модель Marker**
```prisma
model Marker {
  id          String   @id @default(cuid())
  title       String
  description String?
  latitude    Float
  longitude   Float
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
```

## Поток данных

1. **Загрузка приложения**
   - `page.tsx` монтируется и вызывает `loadMarkers()`
   - API `GET /api/markers` возвращает все метки
   - Метки отображаются на карте и доступны для сайдбара

2. **Добавление метки**
   - Пользователь кликает на карту
   - Открывается `MarkerModal` с координатами клика
   - После заполнения формы отправляется `POST /api/markers`
   - Метки перезагружаются, новая метка появляется на карте

3. **Редактирование метки**
   - Клик на кнопку редактирования в сайдбаре
   - `MarkerModal` открывается с данными метки
   - После сохранения отправляется `PATCH /api/markers/[id]`
   - Метки обновляются

4. **Удаление метки**
   - Клик на кнопку удаления
   - Открывается `DeleteConfirmModal`
   - После подтверждения отправляется `DELETE /api/markers/[id]`
   - Метка удаляется из карты и списка

5. **Центрирование на метке**
   - Клик на иконку просмотра в сайдбаре
   - Карта плавно центрируется на координатах метки
   - Масштаб увеличивается до 15

## Технические особенности

- **SSR/CSR**: Карта рендерится только на клиенте (Leaflet требует `window`)
- **State Management**: Локальный state в `page.tsx` (для простоты)
- **API Calls**: Нативный `fetch` API
- **Type Safety**: Полная типизация с TypeScript
- **Database**: Prisma ORM с миграциями
- **Deployment**: Готово к деплою на Vercel с автоматическим CI/CD
